<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Function Tester</title>
</head>
<body>
    <h1>JavaScript Function Tester</h1>
    <div id="results"></div>
    <div id="summary"></div>

    <script>
        const testResults = [];

        function logResult(testName, result) {
            const resultsElement = document.getElementById("results");
            const status = result ? "✅ Passed" : "❌ Failed";
            testResults.push({ testName, status });
            resultsElement.innerHTML += `<p><strong>${testName}:</strong> ${status}</p>`;
        }

        function displaySummary() {
            const summaryElement = document.getElementById("summary");
            const passedTests = testResults.filter(test => test.status.includes("✅")).length;
            const totalTests = testResults.length;
            summaryElement.innerHTML = `<h2>Summary: ${passedTests} / ${totalTests} tests passed</h2>`;
        }

        function testJavaEnabled() {
            logResult("Java Enabled (navigator.javaEnabled)", navigator.javaEnabled ? navigator.javaEnabled() : false);
        }

        function testEval() {
            try {
                eval("console.log('Eval is working!')");
                logResult("Eval (Function Execution)", true);
            } catch (e) {
                logResult("Eval (Function Execution)", false);
            }
        }

        function testTimeout() {
            try {
                setTimeout(() => logResult("setTimeout()", true), 10);
            } catch (e) {
                logResult("setTimeout()", false);
            }
        }

        function testFetch() {
            fetch("https://jsonplaceholder.typicode.com/todos/1")
                .then(() => logResult("Fetch API", true))
                .catch(() => logResult("Fetch API", false));
        }

        function testLocalStorage() {
            try {
                localStorage.setItem("test", "value");
                logResult("Local Storage", true);
            } catch (e) {
                logResult("Local Storage", false);
            }
        }

        function testConsoleLog() {
            try {
                console.log("Console log test");
                logResult("Console Log", true);
            } catch (e) {
                logResult("Console Log", false);
            }
        }

        function testIframeInjection() {
            try {
                const iframe = document.createElement("iframe");
                iframe.srcdoc = "<script>parent.logResult('Iframe Injection', true)<\/script>";
                document.body.appendChild(iframe);
            } catch (e) {
                logResult("Iframe Injection", false);
            }
        }

        function testBookmarklet() {
            try {
                const bookmarklet = document.createElement("a");
                bookmarklet.href = "javascript:(function(){alert('Bookmarklet works!')})();";
                document.body.appendChild(bookmarklet);
                bookmarklet.click();
                logResult("Bookmarklet Execution", true);
            } catch (e) {
                logResult("Bookmarklet Execution", false);
            }
        }

        function testScriptInjection() {
            try {
                const script = document.createElement("script");
                script.textContent = "console.log('Script injection works!');";
                document.body.appendChild(script);
                logResult("Script Injection", true);
            } catch (e) {
                logResult("Script Injection", false);
            }
        }

        function runTests() {
            testJavaEnabled();
            testEval();
            testTimeout();
            testFetch();
            testLocalStorage();
            testConsoleLog();
            testIframeInjection();
            testBookmarklet();
            testScriptInjection();
            setTimeout(displaySummary, 500);  // Ensure async tests finish before summary
        }

        window.onload = runTests;
    </script>
</body>
</html>
